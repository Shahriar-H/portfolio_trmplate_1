var HI_RES = !(
    !(
      (1 < window.devicePixelRatio && 1300 < screen.width) ||
      2e3 < screen.width
    ) || !hires
  ),
  IMG_POSTFIX = HI_RES ? "@2x" : "",
  TERRAIN_URL_BASE = "https://Easin.me/igneous/images/backend/",
  PAGE_SCROLL_INTERVAL = !1,
  COOKIE_EXPIRATION_DATE = new Date(
    new Date().setTime(new Date().getTime() + 31536e6)
  ),
  VOLUME = 0,
  VOLUME_INTERVAL = !1,
  VOLUME_MAX = 1,
  VOLUME_SPEED = 0.01,
  PLAY_SOUND = 1 == getCookie("PLAY_SOUND") || "" == getCookie("PLAY_SOUND"),
  WINDOW_FOCUS = !0,
  WINDOW_WIDTH = $(window).width(),
  WINDOW_HEIGHT = $(window).height(),
  LARGE_TILES = $(".largeTile article"),
  ARTICLES = $("article"),
  LAYERS =
    "sky terrain5-horizon terrain4 terrain3 terrain2 terrain1-closest".split(
      " "
    ),
  LAYER_WIDTH = [3600, 7e3, 6e3, 6e3, 6e3, 6e3],
  LAYER_HEIGHT = [1800, 484, 1280, 1014, 600, 162],
  LAYER_DURATION = [0, 36500, 4e4, 6e4, 1e5, 2e5],
  wheelX = (wheelY = 0),
  pageFit = 0,
  pageLength = 0,
  pageStages = [],
  pageStageIndex = -1,
  pageVisible = !1,
  tileMargin = 0,
  tileWidth = 0,
  lastScroll = 0,
  hash = getHash(),
  fastStart = !!(amazon || google || 1 < hash.length || debug || crawler),
  pageStart = !0,
  lockNav = !1,
  backgroundSound = {},
  buttonSound = {},
  partial = !(!firefox && !msie) && supported,
  highEndDevice = !!((debug && !mobile) || effects),
  nameIntro = (titleIntro = introVisible = !1);
function setCookie(e, t) {
  var n = "expires=" + COOKIE_EXPIRATION_DATE.toGMTString();
  document.cookie = e + "=" + t + "; " + n;
}
function getCookie(e) {
  e += "=";
  for (var t = document.cookie.split(";"), n = 0; n < t.length; n++) {
    var a = t[n].trim();
    if (0 == a.indexOf(e)) return a.substring(e.length, a.length);
  }
  return "";
}
function getHash() {
  var e = window.location.hash;
  return 2 > e.length ? "" : ((window.location.hash = ""), e);
}
function setTooltip() {
  ($.fn.qtip.zindex = 21e3),
    ($.fn.qtip.modal_zindex = 21e3),
    $(".tooltip").each(function (e) {
      $(this).qtip({
        content: { text: $.parseHTML($(this).attr("data-tooltip")) },
        position: {
          my: "top center",
          at: "bottom center",
          target: $(this),
          viewport: $(window),
          effect: function (e, t, n) {
            $(this).animate(t, {
              duration: 600,
              easing: "easeInOut",
              queue: !1,
            });
          },
        },
        style: { classes: "qtip-bootstrap qtip-shadow", tip: { corner: !0 } },
        show: {
          effect: function (e) {
            $(this).fadeIn();
          },
        },
        hide: {
          effect: function (e) {
            $(this).fadeOut();
          },
        },
      });
    });
}
function scrollPage() {
  $(window).scrollTop(0), $(window).scrollLeft(0);
}
function setParallax() {
  $("#backend").parallax({
    calibrateX: mobile,
    calibrateY: mobile,
    limitX: !!mobile && 250,
    limitY: !!mobile && 85,
    scalarX: mobile ? 20 : 15,
    scalarY: mobile ? 15 : 10,
    frictionX: mobile ? 0.95 : 0.15,
    frictionY: mobile ? 0.95 : 0.15,
  }),
    window.DeviceOrientationEvent
      ? window.addEventListener(
          "deviceorientation",
          function () {
            deviceTiltEvent([event.beta, event.gamma]);
          },
          !0
        )
      : window.DeviceMotionEvent
      ? window.addEventListener(
          "devicemotion",
          function () {
            deviceTiltEvent([
              2 * event.acceleration.x,
              2 * event.acceleration.y,
            ]);
          },
          !0
        )
      : window.addEventListener(
          "MozOrientation",
          function () {
            deviceTiltEvent([50 * orientation.x, 50 * orientation.y]);
          },
          !0
        );
}
function deviceTiltEvent(e) {}
function resizeLayers() {
  (WINDOW_WIDTH = $(window).width()),
    (WINDOW_HEIGHT = $(window).height()),
    (lockNav = !0);
  for (var e = 1; e < LAYERS.length; e++) {
    var t = $("#layer" + e + " .scaled"),
      n = t.height() * (LAYER_WIDTH[e] / LAYER_HEIGHT[e]),
      a = "moveLayer" + e,
      o = WINDOW_WIDTH / WINDOW_HEIGHT;
    $.keyframe.define([
      {
        name: a,
        from: { transform: "translate3d(0,0,0)" },
        to: { transform: "translate3d(" + -n + "px,0,0)" },
      },
    ]),
      t.resetKeyframe(),
      t.css("transform", "translate3d(0,0,0)"),
      t.width(n * Math.max(2, o + 0.5)),
      addTiles(e, n),
      t.playKeyframe({
        name: a,
        duration: LAYER_DURATION[e],
        timingFunction: "linear",
        delay: 0,
        repeat: "infinite",
        complete: function () {},
      });
  }
  setTileSize(),
    positionNav(),
    positionFooter(),
    showFooter(),
    pageVisible ? showBackButton() : hideBackButton(),
    !isLandscape() &&
      pageVisible &&
      $("#prevButton, #nextButton").fadeOut("slow"),
    isLandscape()
      ? $("nav").css("z-index", 15e3)
      : $("nav").css("z-index", 13999),
    480 > WINDOW_HEIGHT
      ? LARGE_TILES.addClass("scroll")
      : LARGE_TILES.removeClass("scroll"),
    setTimeout(function () {
      setTimeout(function () {
        scrollPage();
      }, 500),
        moveToCurrentStage();
    }, 100);
}
function setTileSize() {
  var e = WINDOW_HEIGHT,
    t = WINDOW_WIDTH,
    n = $(".largeTile article");
  455 > e && 550 < t
    ? n.css({ height: e - 60, width: Math.min(106400 / (e - 100), t), top: 45 })
    : 400 > e
    ? n.css({ height: e - 30, top: 15 })
    : n.css({ width: "", height: "", top: "" }),
    310 > t && $(".largeTile article").css({ width: t - 30 }),
    setTimeout(function () {
      positionTiles();
    }, 650);
}
function addTiles(e, t) {
  var n = $("#layer" + e + " .scaled"),
    a = Math.floor(t / 4),
    o = n.width();
  o = Math.ceil(o / a);
  n.find("div").remove();
  for (var i = 0; i <= o; i++) {
    var s = (i + 1) % 4;
    0 === s && (s = 4),
      $(
        '<div class="tile" style="width:' +
          a +
          "px;left:" +
          i * a +
          'px;"><img src="' +
          TERRAIN_URL_BASE +
          "terrain-level-" +
          e +
          IMG_POSTFIX +
          "_0" +
          s +
          '.png"/></div'
      ).appendTo(n);
  }
}
function positionTiles() {
  var e = WINDOW_WIDTH,
    t = 320 > e ? 15 : Math.min(30, Math.ceil(0.08 * e)),
    n = $("section.largeTile article").first().width();
  (pageFit = bestFit(e, n, t)),
    (tileMargin = t),
    (tileWidth = n),
    $("section.largeTile").each(function (n) {
      var a = (n = $(this).find("article")).length,
        o = $(n[0]).width(),
        i = 0;
      i =
        e > o * a + t * (a + 1)
          ? (e - (o * a + t * (a - 1))) / 2
          : e < 2 * o
          ? (e - o) / 2
          : 2 * t;
      n.each(function (e) {
        $(this).css("left", i), (i += o + t);
      }),
        $(this).width(i + 2 * t);
    }),
    pageVisible &&
      setTimeout(function () {
        calculateStages(!0);
      }, 600);
}
function positionNav() {
  isLandscape()
    ? $("nav").css("top", "20px")
    : ($("nav").css("top", WINDOW_HEIGHT / 2 - $("nav").height() / 2 + "px"),
      introVisible && hideIntro());
}
function showName() {
  fastStart &&
    setTimeout(function () {
      isLandscape() && showMenu(),
        setTimeout(function () {
          1 < hash.length && 0 < $(hash).length
            ? (showPage(hash),
              $('nav a[href="' + hash + '"]').addClass("selected"))
            : amazon &&
              (showPage("#Prototypes"),
              $('nav a[href="#Prototypes"]').addClass("selected"));
        }, 200);
    }, 300),
    (nameIntro = $("#name").textillate({
      in: {
        effect: "flipInY",
        sync: !1,
        shuffle: !1,
        reverse: !1,
        autoStart: !0,
        loop: !1,
        callback: function () {
          (introVisible = !0), showTitle();
        },
      },
      out: {
        effect: "fadeOutUp",
        sync: !1,
        shuffle: !0,
        reverse: !1,
        autoStart: !1,
        loop: !1,
      },
    })),
    $("#name").css("opacity", 1);
}
function showTitle() {
  (titleIntro = $("#title").textillate({
    in: {
      effect: "flipInY",
      sync: !1,
      shuffle: !1,
      reverse: !1,
      autoStart: !0,
      loop: !1,
      callback: function () {
        (introVisible = !0),
          pageStart &&
            !fastStart &&
            setTimeout(
              function () {
                showMenu();
              },
              isLandscape() ? 100 : 2800
            );
      },
    },
    out: {
      effect: "fadeOutDown",
      sync: !1,
      shuffle: !0,
      reverse: !1,
      autoStart: !1,
      loop: !1,
      callback: function () {
        (introVisible = !1), $("#intro").fadeOut("fast");
      },
    },
  })),
    $("#title").css("opacity", 1);
}
function showIntro() {
  try {
    $("#intro").fadeIn("fast"),
      nameIntro.textillate("in"),
      titleIntro.textillate("in");
  } catch (e) {}
}
function hideIntro() {
  try {
    nameIntro.textillate("out"), titleIntro.textillate("out");
  } catch (e) {
    $("#intro").fadeIn("fast");
  }
}
function blurBackground() {
  highEndDevice &&
    ($("#layer1").addClass("blur1"),
    $("#layer2, #intro").addClass("blur2"),
    $("#layer3, #layer4").addClass("blur3"),
    $("#layer5").addClass("blur4"),
    $("#sky").addClass("blur4")),
    $("#vignette").removeClass("fadeOut").addClass("fadeIn");
}
function unblurBackground() {
  $("#layer1").removeClass("blur1"),
    $("#layer2, #intro").removeClass("blur2"),
    $("#layer3, #layer4").removeClass("blur3"),
    $("#layer5").removeClass("blur4"),
    $("#sky").removeClass("blur4"),
    $("#vignette").addClass("fadeOut");
}
function isLandscape() {
  return 550 < WINDOW_WIDTH;
}
function bestFit(e, t, n) {
  for (
    var a = Math.floor(e / t), o = new Date().getTime();
    1 < a && ((now = new Date().getTime()), !(3e3 < now - o));

  ) {
    if (0 > t * a + n * (a + 1) - e) return a;
    a--;
  }
  return 1;
}
function calculateStages(e) {
  e || (pageStageIndex = 0);
  var t = (e = $("section.selected").find("article")).first().width(),
    n = e.length,
    a = Math.ceil(n / pageFit);
  pageStages = [0];
  for (var o = 0, i = 1; i < a; i++)
    (o =
      1 == pageFit
        ? cssToNum($(e[i]).css("left")) - cssToNum($(e[0]).css("left"))
        : i == a - 1
        ? cssToNum($(e[n - 1]).css("left")) - WINDOW_WIDTH + t + 2 * tileMargin
        : cssToNum($(e[i * pageFit]).css("left")) - 2 * tileMargin),
      pageStages.push(-o);
  generateDots(),
    setTimeout(function () {
      moveToCurrentStage(), positionDots();
    }, 300);
}
function movePage(e) {
  var t = $("section.selected");
  t.css("-webkit-transform", "translate3d(" + e + "px, 0, 0)"),
    t.css("transform", "translate3d(" + e + "px, 0, 0)"),
    t.find("article.flipped").removeClass("flipped");
}
function showPage(e) {
  var t = $(e),
    n = fastStart;
  (lockNav = !0),
    (pageStageIndex = 0),
    hidePage(!0),
    setTimeout(
      function () {
        t.addClass("selected");
        var e = t.find("article");
        e.each(function (t) {
          var a = t > pageFit + 2 ? 5 * t : 300 * t;
          $(this)
            .delay(a)
            .fadeIn(0, function () {
              $(this).addClass("pop"),
                t == e.length - 1 &&
                  setTimeout(function () {
                    (lockNav = !1),
                      isLandscape() &&
                        n &&
                        setTimeout(function () {
                          hideIntro();
                        }, 2e3);
                  }, 500);
            });
        }),
          (pageVisible = !0),
          (pageStart = fastStart = !1),
          t.fadeIn("slow"),
          t.removeClass("fadeOut"),
          calculateStages(!1),
          scrollPage();
      },
      pageVisible ? 2500 : 0
    ),
    $("nav").addClass("showPage"),
    blurBackground(),
    showFooter(),
    isLandscape() && !n && hideIntro(),
    showBackButton()
    // 1024 < WINDOW_WIDTH && 600 < WINDOW_HEIGHT
    //   ? showBackButton()
    //   : hideBackButton();
}
function hidePage(e) {
  var t = $("section.selected");
  movePage(0),
    t &&
      (t.removeClass("selected"),
      LARGE_TILES.removeClass("show"),
      LARGE_TILES.removeClass("flipped"),
      t.find("article").each(function (t) {
        (t = t > pageFit + 2 ? t : (e ? 100 : 300) * t),
          $(this)
            .delay(t)
            .fadeIn(0, function () {
              $(this).removeClass("pop");
            });
      }),
      t.addClass("fadeOut"),
      setTimeout(function () {
        t.fadeOut("fast"), t.removeClass("fadeOut");
      }, 1500),
      (pageVisible = !1)),
    e ||
      ($("nav").removeClass("showPage"),
      setTimeout(
        function () {
          $("nav a").removeClass("selected");
        },
        mobile ? 900 : 100
      ),
      $("#pagination").fadeOut("slow"),
      isLandscape() && hideFooter(),
      hideBackButton(),
      unblurBackground(),
      isLandscape() && showIntro(),
      (lockNav = !1)),
    $("#prevButton, #nextButton").fadeOut("slow");
}
function cssToNum(e) {
  return +e.replace(/[^-\d\.]/g, "");
}
function next() {
  lockNav ||
    (++pageStageIndex >= pageStages.length &&
      (pageStageIndex = pageStages.length - 1),
    moveToCurrentStage());
}
function previous() {
  lockNav ||
    (0 > --pageStageIndex && (pageStageIndex = 0), moveToCurrentStage());
}
function moveToCurrentStage() {
  if (
    (movePage(pageStages[pageStageIndex]),
    moveDot(pageStageIndex),
    setTimeout(function () {
      lockNav = !1;
    }, 500),
    pageVisible && isLandscape())
  )
    switch (!0) {
      case 1 === pageStages.length:
        $("#prevButton, #nextButton").fadeOut("slow");
        break;
      case 0 === pageStageIndex:
        $("#prevButton").fadeOut("slow"),
          $("#nextButton").fadeIn("slow"),
          setNextImage();
        break;
      case pageStageIndex === pageStages.length - 1:
        $("#prevButton").fadeIn("slow"),
          $("#nextButton").fadeOut("slow"),
          setPreviousImage();
        break;
      default:
        $("#prevButton, #nextButton").fadeIn("slow"),
          setPreviousImage(),
          setNextImage();
    }
}
function moveDot(e) {
  var t = +$("#pagination ul li.current a").attr("data-index"),
    n = $('#pagination ul li a[data-index="' + e + '"]').parent();
  e != t &&
    ($("#pagination ul li").removeClass("current current-from-right"),
    e < t && n.addClass("current-from-right"),
    setTimeout(function () {
      n.addClass("current");
    }, 25));
}
function positionDots() {
  (e = $("section.largeTile.selected article").first()).position();
  var e = e.height(),
    t = $("#pagination").height();
  e = Math.min((WINDOW_HEIGHT - e) / 4 - t / 2, WINDOW_HEIGHT - t);
  600 < WINDOW_HEIGHT && (e += 25), $("#pagination").css("bottom", e);
}
function generateDots() {
  var e = pageStages.length,
    t = "";
  if (1 < e) {
    for (var n = ' class="current"', a = 0; a < e; a++)
      (t +=
        "<li" +
        n +
        '><a href="#" data-index="' +
        a +
        '">Page ' +
        (a + 1) +
        "</a></li>"),
        (n = "");
    $("#pagination ul li").remove(),
      $(t).appendTo("#pagination ul"),
      $("#pagination").fadeIn("slow"),
      addDotEvents();
  } else $("#pagination").fadeOut("slow");
}
function addDotEvents() {
  $("#pagination a").click(function (e) {
    return (
      (pageStageIndex = +$(this).attr("data-index")), moveToCurrentStage(), !1
    );
  });
}
function setNextImage() {
  var e = $("section.selected article"),
    t = $("section.selected"),
    n = Math.min((pageStageIndex + 2) * pageFit - 1, e.length - 1),
    a = $(e[n]).find(".main img").prop("src");
  $("#nextButton .thumbnail").slideUp(350, "easeInSine", function () {
    "Help" == t.prop("id")
      ? $(this).css(
          "background-image",
          $(e[n]).find(".mainPanel").css("background-image")
        )
      : $(this).css("background-image", "url(" + a + ")"),
      $(this).slideDown(500, "easeOutSine");
  });
}
function setPreviousImage() {
  var e = $("section.selected article"),
    t = $("section.selected"),
    n = Math.max((pageStageIndex - 1) * pageFit, 0),
    a = $(e[n]).find(".main img").prop("src");
  amazon &&
    2 > n &&
    "Achievements" == t.prop("id") &&
    (a = $(e[1]).find(".main img").prop("src")),
    $("#prevButton .thumbnail").slideUp(350, "easeInSine", function () {
      "Help" == t.prop("id")
        ? $(this).css(
            "background-image",
            $(e[n]).find(".mainPanel").css("background-image")
          )
        : $(this).css("background-image", "url(" + a + ")"),
        $(this).slideDown(500, "easeOutSine");
    });
}
function showMenu() {
  $("nav a").each(function (e) {
    $(this)
      .delay(200 * e)
      .fadeIn(10, function () {
        isLandscape()
          ? $(this).addClass("animated bounceInDown")
          : $(this).addClass("animated bounceInLeft");
      });
  }),
    !isLandscape() && introVisible && hideIntro(),
    showFooter(),
    $("#warning, #loading, #curtain, #splash").remove();
}
function checkPoint() {
  $("#warning").css("opacity", 1),
    $("#message").addClass("animated bounceInDown");
  var e = $("#warningChart").get(0).getContext("2d"),
    t = [
      { label: "Chrome", value: 38, color: "#6dd470" },
      { label: "Safari", value: 17, color: "#00b1da" },
      { label: "Firefox", value: 15, color: "#d75326" },
      { label: "Internet Explorer", value: 5, color: "#1688c4" },
      { label: "Unsupported", value: 25, color: "#999" },
    ],
    n = {
      segmentShowStroke: !1,
      segmentStrokeColor: "#fff",
      segmentStrokeWidth: 2,
      percentageInnerCutout: 50,
      animation: !0,
      animationSteps: 200,
      animationEasing: "easeOutBounce",
      animateRotate: !0,
      animateScale: !0,
      onAnimationComplete: function () {
        $("#warningIcon").addClass("animated bounceIn");
      },
    };
  setTimeout(function () {
    new Chart(e).Doughnut(t, n),
      setTimeout(function () {
        $("#messageText").addClass("animated bounceIn");
      }, 500),
      setTimeout(function () {
        $(".browserSupportIcon").each(function (e) {
          $(this)
            .delay(400 * e)
            .fadeIn(0, function () {
              $(this).addClass("animated bounceIn");
            });
        });
      }, 1e3),
      setTimeout(function () {
        $(".browserSupport img").each(function (e) {
          $(this)
            .delay(400 * e)
            .fadeIn(0, function () {
              switch (!0) {
                case 2 > e:
                  $(this).addClass("animated fadeInRight");
                  break;
                case 1 < e && 4 > e:
                  $(this).addClass("animated flipInY");
                  break;
                default:
                  $(this).addClass("animated flipInX"),
                    setTimeout(function () {
                      $(this).addClass("tada");
                    }, 1e3);
              }
            });
        });
      }, 1500),
      setTimeout(function () {
        $("#message").addClass("continue"),
          setTimeout(function () {
            $("#message .roundSlideButton").addClass("animated fadeIn");
          }, 1e3);
      }, 4500);
  }, 300);
}
function proceed() {
  $("#message").removeClass("bounceInDown").addClass("fadeOutUp"), init();
}
function init() {
  if (
    ($("#backend").css("opacity", 1),
    $("#curtain, #loading").addClass("animated fadeOut"),
    firefox || chrome)
  )
    $(".terrain").removeClass("dim"),
      $("#vignette").addClass("fadeOut"),
      setTimeout(showName, fastStart ? 100 : 3e3);
  else
    var e = LAYERS.length - 1,
      t = setInterval(
        function () {
          $("#layer" + e).removeClass("dim"),
            1 > --e &&
              (clearInterval(t),
              $("#vignette").addClass("fadeOut"),
              setTimeout(showName, fastStart ? 100 : 1500));
        },
        fastStart ? 100 : 1500
      );
  (lockNav = !1), $("footer").css("display", "block");
}
function positionFooter() {
  var e = mobile && !isLandscape() ? 20 : 10;
  600 < WINDOW_HEIGHT && (e = WINDOW_HEIGHT - $("#footer").height()),
    $("#footer").css("top", e);
}
function showFooter() {
  (!isLandscape() && 420 < WINDOW_HEIGHT) || 600 < WINDOW_HEIGHT
    ? ($("#footerRocket").removeClass("bounceOut").addClass("bounceIn"),
      setTimeout(function () {
        $("#footerFirst").removeClass("bounceOut").addClass("bounceIn"),
          setTimeout(function () {
            $("#footerLast").removeClass("bounceOut").addClass("bounceIn");
          }, 400);
      }, 700))
    : hideFooter();
}
function hideFooter() {
  $("#footerFirst, #footerLast").removeClass("bounceIn").addClass("bounceOut"),
    setTimeout(function () {
      $("#footerRocket").removeClass("bounceIn").addClass("bounceOut");
    }, 500);
}
function showBackButton() {
  $("#backButton")
    .css("display", "block")
    .removeClass("bounceOut")
    .addClass("bounceIn");
}
function hideBackButton() {
  $("#backButton").removeClass("bounceIn").addClass("bounceOut");
}
function navButtonEvent(e) {
  if (!lockNav)
    if (((lockNav = !0), e.hasClass("selected")))
      hidePage(!1),
        setTimeout(function () {
          $("nav a").removeClass("selected");
        }, 300);
    else {
      setTimeout(function () {
        $("nav a").removeClass("selected"), e.addClass("selected");
      }, 300);
      var t = e.attr("href");
      "#Easin" === t
        ? (window.top.location.href = "https://Easin.me/")
        : showPage(t);
    }
}
function flipArticle(e) {
  e.parents("article").toggleClass("flipped");
}
if (
  ((function (e, t, n, a, o, i, s) {
    (e.GoogleAnalyticsObject = o),
      (e.ga =
        e.ga ||
        function () {
          (e.ga.q = e.ga.q || []).push(arguments);
        }),
      (e.ga.l = 1 * new Date()),
      (i = t.createElement(n)),
      (s = t.getElementsByTagName(n)[0]),
      (i.async = 1),
      (i.src = "//www.google-analytics.com/analytics.js"),
      s.parentNode.insertBefore(i, s);
  })(window, document, "script", 0, "ga"),
  ga("create", "UA-19875648-1", "Easin.me"),
  ga("send", "pageview"),
  supported)
) {
  var startSound = function () {
      try {
        backgroundSound.start("backgroundSound"),
          setVolume(backgroundSound, PLAY_SOUND ? VOLUME_MAX : 0);
      } catch (e) {}
      $(window)
        .focus(function () {
          WINDOW_FOCUS = !0;
        })
        .blur(function () {
          WINDOW_FOCUS = !1;
        });
      var e = WINDOW_FOCUS;
      setInterval(function () {
        WINDOW_FOCUS && !e
          ? PLAY_SOUND && setVolume(backgroundSound, VOLUME_MAX)
          : WINDOW_FOCUS || setVolume(backgroundSound, 0),
          (e = WINDOW_FOCUS);
      }, 1e3),
        $(window).on("keydown", function (e) {
          (83 !== e.which &&
            32 !== e.which &&
            77 !== e.which &&
            80 !== e.which) ||
            ((PLAY_SOUND = !PLAY_SOUND)
              ? (setVolume(backgroundSound, VOLUME_MAX),
                setCookie("PLAY_SOUND", 1))
              : (setVolume(backgroundSound, 0), setCookie("PLAY_SOUND", 0)));
        });
    },
    setVolume = function (e, t) {
      clearInterval(VOLUME_INTERVAL);
      var n = t > VOLUME ? 1 : -1;
      VOLUME_INTERVAL = setInterval(function () {
        (((VOLUME += VOLUME_SPEED * n) >= t && 1 === n) ||
          (VOLUME <= t && -1 === n)) &&
          ((VOLUME = t), clearInterval(VOLUME_INTERVAL));
        try {
          e.volume(VOLUME);
        } catch (e) {}
      }, 10);
    };
  if (
    (mobile &&
      !crawler &&
      addToHomescreen({
        detectHomescreen: !0,
        skipFirstVisit: !0,
        startDelay: 20,
        lifespan: 10,
      }),
    $(window).on("touchmove", function (e) {
      e.preventDefault();
    }),
    $(window).scroll(function (e) {
      e.preventDefault();
    }),
    $("section").swipe({
      swipeLeft: function (e, t, n, a, o) {
        next();
      },
      swipeRight: function (e, t, n, a, o) {
        previous();
      },
      threshold: Math.min(0.1 * WINDOW_WIDTH, 50),
      fingers: "all",
    }),
    $(document).swipe({
      pinchOut: function (e, t, n, a, o, i) {
        hidePage(!1);
      },
      fingers: 2,
      pinchThreshold: Math.min(0.05 * WINDOW_WIDTH, 30),
    }),
    $("section").mousewheel(function (e, t) {
      return (wheelX = e.deltaX), (wheelY = e.deltaY), !1;
    }),
    $("#prevButton").click(function (e) {
      return previous(), !1;
    }),
    $("#nextButton").click(function (e) {
      return next(), !1;
    }),
    (PAGE_SCROLL_INTERVAL = setInterval(function () {
      var e = new Date().getTime();
      (0 != wheelX || 0 != wheelY) &&
        1600 < e - lastScroll &&
        ((lastScroll = e),
        0 < (Math.abs(wheelX) > Math.abs(wheelY) ? wheelX : -wheelY)
          ? next()
          : previous()),
        (wheelX = wheelY = 0);
    }, 50)),
    resizeLayers(),
    $(window).resize(function () {
      setTimeout(resizeLayers, 50);
    }),
    !mobile && !amazon)
  )
    try {
      (backgroundSound = new SeamlessLoop()).addUri(
        SOUND_URL,
        76799,
        "backgroundSound"
      ),
        backgroundSound.callback(startSound);
    } catch (e) {}
  $("#name").fitText(mobile ? 2 : 1.5),
    $("#title").fitText(mobile ? 3.5 : 2.5),
    mobile
      ? ($("nav a").on("touchstart", function (e) {
          return navButtonEvent($(this)), !1;
        }),
        $(".infoButton, .infoButtonClose").on("touchstart", function (e) {
          return flipArticle($(this)), !1;
        }))
      : ($("nav a").click(function (e) {
          return navButtonEvent($(this)), !1;
        }),
        $(".infoButton, .infoButtonClose").click(function (e) {
          return flipArticle($(this)), !1;
        })),
    $("#closeButton, #footer").click(function (e) {
      return pageVisible && hidePage(!1), !1;
    }),
    $("#message .next").click(function (e) {
      return proceed(), !1;
    }),
    $(document).keyup(function (e) {
      switch (!0) {
        case 27 == e.keyCode && pageVisible:
          hidePage(!1);
          break;
        case 37 == e.keyCode || 38 == e.keyCode:
          previous();
          break;
        case 39 == e.keyCode || 40 == e.keyCode:
          next();
      }
    }),
    $("nav a").mouseenter(function (e) {
      !$(this).hasClass("selected") &&
        PLAY_SOUND &&
        (($("#hover-sound")[0].volume = 0.15),
        $("#hover-sound")[0].load(),
        $("#hover-sound")[0].play());
    }),
    $(window).load(function () {
      setParallax(), setTooltip(), partial ? checkPoint() : init();
    });
}
